# game

## Formatting Source Code

Non formatted source code won't be merged, use the `dotnet format` cli util for
formatting, which is installed along with the [dotnet
SDK](https://learn.microsoft.com/en-us/dotnet/core/install/).

Format with:

```bash
dotnet format Assembly-CSharp.csproj
```

> See [Generating Assembly-CSharp.csproj and
> .sln](#generating-assembly-csharpcsproj-and-sln) if it's missing.

## Code Style

Code style rules are specified in `.editorconfig` file, which are used for
formatting. The configurations is mostly based on the [microsoft
defaults](https://learn.microsoft.com/en-us/dotnet/fundamentals/code-analysis/code-style-rule-options).

## Source Control Config

The repo configurations based on [this
guide](https://gist.github.com/j-mai/4389f587a079cb9f9f07602e4444a6ed) for
using git/github with Unity.

Git config uses UnityYAMLMerge utility for merging special unity files, git
needs the environment variable `UNITYYAML` to be configured with the path to
UnityYAMLMerge executable.

To configure the environment variables in your system, run:

```bash
source scripts/set_env.sh
```

## Generating Assembly-CSharp.csproj and .sln

`Assembly-CSharp.csproj` is a C# project file generated by Unity that defines
how the core game code (typically user-written scripts) should be compiled. It
lists source files, dependencies, and build settings. The .sln file, or
solution file, groups one or more project files (like Assembly-CSharp.csproj)
into a unified workspace for IDEs like Visual Studio, allowing developers to
manage and build all projects together, maintain configuration settings, and
organize project structure in a consistent way.

If you are using `Visual Studio` or `VSCode` you should have no problem with
this, if not then do one of the following to trigger the generation of project
files:

1. Configure the path of a C# editor (like vscode or visual studio) under
   `preferences/External Tools/External Script Editor`, and then click on
   `Regenerate project file`.

2. When using Neovim you could use this [nvim
   plugin](https://github.com/apyra/nvim-unity-sync), and this [unity
   plugin](https://github.com/apyra/nvim-unity).
